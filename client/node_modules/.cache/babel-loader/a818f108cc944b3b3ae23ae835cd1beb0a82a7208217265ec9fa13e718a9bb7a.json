{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\MERN-Full-Stack-Pet-Adoption-App\\\\client\\\\src\\\\components\\\\petSearch\\\\petSearchPage.tsx\",\n  _s = $RefreshSig$();\nimport queryString from \"query-string\";\nimport { useEffect } from \"react\";\nimport { useLoaderData, useSearchParams } from \"react-router-dom\";\nimport { SearchBar } from \"./searchBar\";\nimport { PetCard } from \"./petCard\";\nimport { Pagination } from \"./pagination\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PetSearchPage = () => {\n  _s();\n  let [searchParams, setSearchParams] = useSearchParams();\n  const pets = useLoaderData();\n  useEffect(() => {\n    setSearchParams(searchParams);\n  }, [searchParams, setSearchParams]);\n  const clearQuery = () => {\n    return setSearchParams({});\n  };\n\n  //Pagination data.\n  const resultsCount = pets.totalPetsResults;\n  const limit = Number(searchParams.get(\"limit\") || 6);\n  const page = Number(searchParams.get(\"page\") || 1);\n  const pages = Math.trunc(Math.ceil(resultsCount / limit));\n  let pageList = [];\n  if (resultsCount) {\n    pageList = [...Array(pages + 1).keys()].slice(1);\n  }\n  const next = page < pages ? page + 1 : page;\n  const previous = page > 1 ? page - 1 : page;\n  const paginationQuery = e => {\n    const {\n      name: key,\n      id: value\n    } = e.currentTarget;\n    let parsed = queryString.parse(window.location.search);\n    if (!parsed[key]) {\n      //No key present in current search params, set search params.\n      parsed[key] = value;\n    } else if (value !== parsed[key]) {\n      //Key present but value is new in current search params,\n      //update params value.\n      delete parsed[key];\n      parsed[key] = value;\n    }\n    const stringified = queryString.stringify(parsed);\n    setSearchParams(stringified);\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n  const sortQuery = e => {\n    const {\n      name: key,\n      id: value\n    } = e.currentTarget;\n    let parsed = queryString.parse(window.location.search);\n    if (!parsed[key]) {\n      //No key present in current search params, set search params.\n      parsed[key] = value;\n    } else if (key in parsed && value === parsed[key]) {\n      //Key and value match current search params, delete search params from query.\n      delete parsed[key];\n    } else if (value !== parsed[key]) {\n      //Key present but value is new in current search params,\n      //update params value.\n      parsed[key] = value;\n    }\n    delete parsed[\"page\"];\n    const stringified = queryString.stringify(parsed);\n    setSearchParams(stringified);\n  };\n  const speciesQuery = e => {\n    const {\n      name: key,\n      id: value\n    } = e.currentTarget;\n    let parsed = queryString.parse(window.location.search);\n    if (!Array.isArray(parsed.species)) {\n      parsed.species = [parsed.species];\n    }\n    if (!parsed[key]) {\n      //No key present in current search params, append sort search params.\n      parsed[key] = value;\n    } else if (key in parsed && value === parsed[key]) {\n      //Key and value match current sort search params, remove sort search params.\n      delete parsed[key];\n    } else if (!parsed.species.includes(value)) {\n      parsed.species.push(value);\n    } else if (parsed.species.includes(value)) {\n      parsed.species = parsed.species.filter(element => {\n        return element !== value;\n      });\n    }\n    delete parsed[\"page\"];\n    const stringified = queryString.stringify(parsed);\n    setSearchParams(stringified);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4\",\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      clearQuery: clearQuery,\n      sortQuery: sortQuery,\n      speciesQuery: speciesQuery\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"flex flex-row flex-wrap justify-evenly gap-x-1 gap-y-7 my-5\",\n      children: pets.data.length !== 0 ? pets.data.map(pet => /*#__PURE__*/_jsxDEV(PetCard, {\n        species: pet.species,\n        _id: pet._id,\n        name: pet.name,\n        fee: pet.fee,\n        image: pet.image,\n        gender: pet.gender,\n        age: pet.age,\n        dateAddedToSite: pet.dateAddedToSite\n      }, pet._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col justify-center my-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center mb-4\",\n          children: \"Woof... We're having trouble finding pets right now.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex my-20\",\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        pageList: pageList,\n        next: next,\n        previous: previous,\n        paginationQuery: paginationQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(PetSearchPage, \"fzgVfwLIN3TxL4g/OgutIbgxKGg=\", false, function () {\n  return [useSearchParams, useLoaderData];\n});\n_c = PetSearchPage;\nvar _c;\n$RefreshReg$(_c, \"PetSearchPage\");","map":{"version":3,"names":["queryString","useEffect","useLoaderData","useSearchParams","SearchBar","PetCard","Pagination","jsxDEV","_jsxDEV","PetSearchPage","_s","searchParams","setSearchParams","pets","clearQuery","resultsCount","totalPetsResults","limit","Number","get","page","pages","Math","trunc","ceil","pageList","Array","keys","slice","next","previous","paginationQuery","e","name","key","id","value","currentTarget","parsed","parse","window","location","search","stringified","stringify","scrollTo","top","behavior","sortQuery","speciesQuery","isArray","species","includes","push","filter","element","className","children","fileName","_jsxFileName","lineNumber","columnNumber","data","length","map","pet","_id","fee","image","gender","age","dateAddedToSite","_c","$RefreshReg$"],"sources":["C:/Users/divya/OneDrive/Desktop/MERN-Full-Stack-Pet-Adoption-App/client/src/components/petSearch/petSearchPage.tsx"],"sourcesContent":["import queryString from \"query-string\";\r\nimport { useEffect } from \"react\";\r\nimport { useLoaderData, useSearchParams } from \"react-router-dom\";\r\nimport { SearchBar } from \"./searchBar\";\r\nimport { PetCard } from \"./petCard\";\r\nimport { Pagination } from \"./pagination\";\r\n\r\nexport const PetSearchPage: Function = () => {\r\n  let [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  const pets = useLoaderData() as PetData;\r\n\r\n  useEffect(() => {\r\n    setSearchParams(searchParams);\r\n  }, [searchParams, setSearchParams]);\r\n\r\n  const clearQuery: React.MouseEventHandler = () => {\r\n    return setSearchParams({});\r\n  };\r\n\r\n  //Pagination data.\r\n  const resultsCount = pets.totalPetsResults;\r\n  const limit: number = Number(searchParams.get(\"limit\") || 6);\r\n  const page: number = Number(searchParams.get(\"page\") || 1);\r\n  const pages: number = Math.trunc(Math.ceil(resultsCount / limit));\r\n  let pageList: number[] = [];\r\n  if (resultsCount) {\r\n    pageList = [...Array(pages + 1).keys()].slice(1);\r\n  }\r\n  const next = page < pages ? page + 1 : page;\r\n  const previous = page > 1 ? page - 1 : page;\r\n\r\n  const paginationQuery = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    const { name: key, id: value } = e.currentTarget as HTMLButtonElement;\r\n    let parsed = queryString.parse(window.location.search);\r\n\r\n    if (!parsed[key]) {\r\n      //No key present in current search params, set search params.\r\n      parsed[key] = value;\r\n    } else if (value !== parsed[key]) {\r\n      //Key present but value is new in current search params,\r\n      //update params value.\r\n      delete parsed[key];\r\n      parsed[key] = value;\r\n    }\r\n\r\n    const stringified = queryString.stringify(parsed);\r\n    setSearchParams(stringified);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  const sortQuery = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    const { name: key, id: value } = e.currentTarget as HTMLButtonElement;\r\n    let parsed = queryString.parse(window.location.search);\r\n\r\n    if (!parsed[key]) {\r\n      //No key present in current search params, set search params.\r\n      parsed[key] = value;\r\n    } else if (key in parsed && value === parsed[key]) {\r\n      //Key and value match current search params, delete search params from query.\r\n      delete parsed[key];\r\n    } else if (value !== parsed[key]) {\r\n      //Key present but value is new in current search params,\r\n      //update params value.\r\n      parsed[key] = value;\r\n    }\r\n    delete parsed[\"page\"];\r\n\r\n    const stringified = queryString.stringify(parsed);\r\n    setSearchParams(stringified);\r\n  };\r\n\r\n  const speciesQuery = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    const { name: key, id: value } = e.currentTarget as HTMLButtonElement;\r\n    let parsed = queryString.parse(window.location.search);\r\n\r\n    if (!Array.isArray(parsed.species)) {\r\n      parsed.species = [parsed.species];\r\n    }\r\n\r\n    if (!parsed[key]) {\r\n      //No key present in current search params, append sort search params.\r\n      parsed[key] = value;\r\n    } else if (key in parsed && value === parsed[key]) {\r\n      //Key and value match current sort search params, remove sort search params.\r\n      delete parsed[key];\r\n    } else if (!parsed.species.includes(value)) {\r\n      parsed.species.push(value);\r\n    } else if (parsed.species.includes(value)) {\r\n      parsed.species = parsed.species!.filter((element: any) => {\r\n        return element !== value;\r\n      });\r\n    }\r\n    delete parsed[\"page\"];\r\n\r\n    const stringified = queryString.stringify(parsed);\r\n    setSearchParams(stringified);\r\n  };\r\n\r\n  return (\r\n    <div className={\"container mx-auto px-4\"}>\r\n      <SearchBar\r\n        clearQuery={clearQuery}\r\n        sortQuery={sortQuery}\r\n        speciesQuery={speciesQuery}\r\n      />\r\n\r\n      <ul className=\"flex flex-row flex-wrap justify-evenly gap-x-1 gap-y-7 my-5\">\r\n        {pets.data.length !== 0 ? (\r\n          pets.data.map((pet: PetCard) => (\r\n            <PetCard\r\n              key={pet._id}\r\n              species={pet.species}\r\n              _id={pet._id}\r\n              name={pet.name}\r\n              fee={pet.fee}\r\n              image={pet.image}\r\n              gender={pet.gender}\r\n              age={pet.age}\r\n              dateAddedToSite={pet.dateAddedToSite}\r\n            />\r\n          ))\r\n        ) : (\r\n          <div className=\"flex flex-col justify-center my-4\">\r\n            <h3 className=\"text-center mb-4\">\r\n              Woof... We're having trouble finding pets right now.\r\n            </h3>\r\n          </div>\r\n        )}\r\n      </ul>\r\n\r\n      <div className=\"flex my-20\">\r\n        <Pagination\r\n          pageList={pageList}\r\n          next={next}\r\n          previous={previous}\r\n          paginationQuery={paginationQuery}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}